# GC

‌GC（Garbage Collection）‌，即垃圾回收，是Java虚拟机（JVM）的一种自动内存管理机制。其主要作用是回收程序中不再使用的对象所占用的内存空间，防止内存泄漏，保证程序的稳定运行。



## GC的工作原理

GC的工作原理可以分为以下几个步骤：

1. ‌标记‌：从根对象（如静态变量、栈帧中的局部变量等）出发，遍历所有可达对象，并标记它们为“存活”。
2. 清除‌：清除所有未被标记的对象，释放它们占用的内存空间。
3. ‌压缩‌（可选）：将存活的对象移动到内存的一端，减少内存碎片，提高内存利用率。

## GC的常用算法

1. 标记-清除（Mark-Sweep）
2. 标记-整理（Mark-Compact）
3. 复制算法（Copying）
4. 分代收集（Generational GC）

需要理解每种算法的优缺点和适用场景。



JVM内存区域

‌堆内存‌：用于存储对象实例和数组。堆内存被划分为新生代和老年代，新生代主要用于新创建的对象，老年代用于长期存活的对象。

元空间‌：用于存储类元数据，替代了早期的永久代。元空间使用本地内存，默认不设上限，动态扩展能力强，减少了内存溢出的风险‌。



学习垃圾回收（GC）可以从以下几个方面入手：

1. **GC的基本概念**：
   - 了解GC的作用：自动管理内存，回收不再使用的对象。
   - 学习GC的基本原理：标记-清除、复制、标记-整理等算法。
2. **GC算法**：
   - 学习常见的GC算法：
     - 标记-清除（Mark-Sweep）
     - 标记-整理（Mark-Compact）
     - 复制算法（Copying）
     - 分代收集（Generational GC）
   - 理解每种算法的优缺点和适用场景。
3. **分代垃圾回收**：
   - 学习堆内存的分代模型（年轻代、老年代、永久代/元空间）。
   - 了解不同代的GC策略（Minor GC、Major GC、Full GC）。
4. **常见GC实现**：
   - 学习主流JVM中的GC实现：
     - Serial GC
     - Parallel GC
     - CMS GC
     - G1 GC
     - ZGC
     - Shenandoah GC
   - 理解它们的工作原理和适用场景。
5. **GC调优**：
   - 学习如何通过JVM参数调整GC行为（如`-XX:+UseG1GC`）。
   - 使用工具分析GC日志（如`jstat`、`GCViewer`、`VisualVM`）。
   - 优化GC性能，减少停顿时间（GC Pause）。
6. **GC日志分析**：
   - 学习如何启用GC日志（如`-Xlog:gc`）。
   - 分析GC日志中的信息（如GC频率、停顿时间、回收的内存量）。
7. **实践与实验**：
   - 编写代码模拟内存分配和回收。
   - 使用不同GC策略运行程序，观察性能差异。
8. **深入研究**：
   - 阅读JEP文档（如JEP 333、JEP 312）了解最新GC特性。
   - 学习GC的源码实现（如OpenJDK中的GC模块）。